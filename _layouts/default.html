<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<link rel="alternate" type="application/atom+xml" title="Shane Engelman's Blog on SV OutRun" href="/feed.xml">

{%- include head.html -%}

<script type="text/javascript">
  const theme = localStorage.getItem('theme');
  if (theme === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
  } else {
    document.documentElement.setAttribute('data-theme', 'dark');
  }
</script>

<body>
  <div class="container">

    {%- include header.html -%}

    <main>
      {{ content }}
    </main>

    {%- include footer.html -%}

  </div>
</body>
<script type="text/javascript">
  const userPrefers = getComputedStyle(document.documentElement).getPropertyValue('content');
  console.log(userPrefers);
  if (theme === "dark") {
    document.getElementById("theme-toggle").innerHTML = "Light";
  } else if (theme === "light") {
    document.getElementById("theme-toggle").innerHTML = "Dark";
  } else if (userPrefers === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
    window.localStorage.setItem('theme', 'light');
    document.getElementById("theme-toggle").innerHTML = "Dark";
  } else {
    document.documentElement.setAttribute('data-theme', 'dark');
    window.localStorage.setItem('theme', 'dark');
    document.getElementById("theme-toggle").innerHTML = "Light";
  }

  function modeSwitcher() {
    console.log(localStorage.getItem('theme'));
    let currentMode = document.documentElement.getAttribute('data-theme');
    if (currentMode === "dark") {
      document.documentElement.setAttribute('data-theme', 'light');
      window.localStorage.setItem('theme', 'light');
      document.getElementById("theme-toggle").innerHTML = "Dark";
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
      window.localStorage.setItem('theme', 'dark');
      document.getElementById("theme-toggle").innerHTML = "Light";
    }
  }
</script>

</html>
